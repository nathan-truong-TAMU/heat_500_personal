<%= link_to 'Back', root_path, class: 'back-link' %>

<p class="notice"><%= notice %></p>

<h1>Members</h1>

<div>
  <%# Filter the members by dues paid %>
  <%if params[:filter] != "dues" %>
    <%= link_to("Filter by Dues Paid", member_list_path(sort: params[:sort], order: params[:order], filter: "dues"), class: 'btn btn-primary') %></th>
  <%else%>
    <%= link_to("Remove Filter for Dues Paid", member_list_path(sort: params[:sort], order: params[:order], filter: nil), class: 'btn btn-primary') %></th>
  <%end%>

  <%# Filter the members to be only members%>
  <%if params[:filter] != "members" %>
    <%= link_to("Filter by Members only", member_list_path(sort: params[:sort], order: params[:order], filter: "members"), class: 'btn btn-primary') %></th>
  <%else%>
    <%= link_to("Remove Filter for Members", member_list_path(sort: params[:sort], order: params[:order], filter: nil), class: 'btn btn-primary') %></th>
  <%end%>

  <%# Filter the members to be only officers %>
  <%if params[:filter] != "officers" %>
    <%= link_to("Filter by Officers", member_list_path(sort: params[:sort], order: params[:order], filter: "officers"), class: 'btn btn-primary') %></th>
  <%else%>
    <%= link_to("Remove Filter for Officers", member_list_path(sort: params[:sort], order: params[:order], filter: nil), class: 'btn btn-primary') %></th>
  <%end%>
</div>
<table class="table member-table" summary="Member list">
      <tr class = "header">
        <%# Using conditional logic for the ui changes to switch between different sorting %>

        <%# Name %>
        <%if params[:sort] == "name" %>
          <%if params[:order] == "desc" %>
            <th><%= link_to(raw("Name &#8595"), member_list_path(sort: "name", order: "asc"), focus: true, class: 'btn btn-primary sort-btn') %></th>
          <%else%>
            <th><%= link_to(raw("Name &#8593"), member_list_path, focus: true, class: 'btn btn-primary sort-btn') %></th>
          <%end %>
        <%else%>
          <th><%= link_to(raw("Name"), member_list_path(sort: "name", order: "desc"), class: 'btn btn-primary sort-btn') %></th>
        <%end%>
        
        <%# Email %>
        <%if params[:sort] == "email" %>
          <%if params[:order] == "desc" %>
            <th><%= link_to(raw("Email &#8595"), member_list_path(sort: "email", order: "asc", filter: params[:filter]), class: 'btn btn-primary sort-btn selected-btn') %></th>
          <%else%>
            <th><%= link_to(raw("Email &#8593"), member_list_path, class: 'btn btn-primary sort-btn selected-btn') %></th>
          <%end %>
        <%else%>
          <th><%= link_to(raw("Email"), member_list_path(sort: "email", order: "desc", filter: params[:filter]), class: 'btn btn-primary sort-btn') %></th>
        <%end%>

        <%# Points %>
        <%if params[:sort] == "points" %>
          <%if params[:order] == "desc" %>
            <th><%= link_to(raw("Points &#8595"), member_list_path(sort: "points", order: "asc", filter: params[:filter]), class: 'btn btn-primary sort-btn selected-btn') %></th>
          <%else%>
            <th><%= link_to(raw("Points &#8593"), member_list_path, class: 'btn btn-primary sort-btn selected-btn') %></th>
          <%end %>
        <%else%>
          <th><%= link_to(raw("Points"), member_list_path(sort: "points", order: "desc", filter: params[:filter]), class: 'btn btn-primary sort-btn') %></th>
        <%end%>
        <%# <th>Points</th> %>
        <th>Dues Paid</th>
        <th>Position</th>
        <th>Actions</th>
      </tr>
  <% @members.each do |member| %>
    <tr>
            <td><%= member.name %></td>
            <td><%= member.email %></td>
            <td><%= member.points %></td>
            <td><%= member.dues_paid? ? 'Yes' : 'No' %></td>
            <td><%= member.position || '-' %></td>
            <td class = "actions">
                <%= link_to("Show", member_path(member), class: 'btn btn-primary') %>
                <%= link_to("Edit", edit_member_path(member), class: 'btn btn-primary') %>
                <%= link_to("Delete", member_path(member), class: 'btn btn-danger', data: { turbo_method: 'delete', turbo_confirm: "Are you sure?" } )%>
            </td>
        </tr>
  <% end %>
</table>

<%= link_to "New member", new_member_path, class: 'new-member-link' %>

<style>
  body {
    background-color: #f7f7f7;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px;
  }

  a {
    color: #007bff;
    text-decoration: none;
    transition: color 0.2s ease-in-out;
  }

  a:hover {
    color: #0056b3;
    text-decoration: underline;
  }

  .notice {
    color: #28a745;
    font-size: 16px;
    margin-bottom: 20px;
  }

  h1 {
    color: #333;
    text-align: center;
    margin-bottom: 30px;
  }

  .member-table{
    background-color: rgba(98, 111, 71,0.95);
    color: #FEFAE0;
  }

  #members {
    max-width: 800px;
    margin: auto;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
  }

  .member-item {
    padding: 10px 0;
    border-bottom: 1px solid #eee;
  }

  .member-item:last-child {
    border-bottom: none;
  }

  .member-action {
    margin-top: 10px;
  }

  .new-member-link, .back-link {
    display: inline-block;
    background-color: #007bff;
    color: #fff;
    padding: 10px 20px;
    border-radius: 5px;
    margin: 20px 0;
    text-align: center;
  }

  .new-member-link:hover, .back-link:hover {
    background-color: #0056b3;
  }

  .sort-btn{
    background-color: #4C6444;
    
  }

  .sort-btn:hover{
    background-color: #102820;
    text-decoration: underline;
    
  }

  .selected-btn{
    background-color: #102820;
    color: red;
  }

</style>
