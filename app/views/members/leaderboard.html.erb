<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <%= link_to root_path, class: "navbar-brand" do %>
        <%= image_tag("HeatAppLogo.png", alt: "Logo", width: "80", height: "80", class: "d-inline-block align-top") %>
      <% end %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <%= link_to "Members", members_path, class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "Events", events_path, class: "nav-link" %>
          </li>
          <% if is_officer_or_admin?(session) %>
            <li class="nav-item">
              <%= link_to "Event Attendance", events_members_path, class: "nav-link" %>
            </li>
          <% end %>
          <li class="nav-item">
            <%= link_to "Leaderboard", "/leaderboard", class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "Calendar", "/calendars", class: "nav-link" %>
          </li>
        </ul>
      </div>
      <div class="ml-auto">
        <% if current_user %>
          <div style="width: 75px; height: 75px; border-radius: 50%; overflow: hidden;">
            <%= link_to(check_member_attendance_path, onclick: "showEventsAndMeetings()") do %>
              <%= image_tag(current_user.avatar_url, style: "width: 100%; height: auto; border-radius: 50%; margin-bottom: 5px;") %>
            <% end %>
          </div>
          <%= button_to "Logout", destroy_user_session_path(redirect_to: root_path), data: { turbo: "false" }, method: :delete, class: "btn btn-success" %>
        <% else %>
          <%= link_to "Login", new_user_session_path, class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </nav>

  <p class="notice"><%= notice %></p>

  <h1>Leaderboard</h1>
  <% if !@filter %>
    <%= link_to("Filter by dues paid", "/leaderboard?filter=true", class: 'btn btn-primary') %>
  <% else %>
    <%= link_to("Remove dues filter", "/leaderboard", class: 'btn btn-primary') %>
  <% end %>

  <table class="table member-table" summary="Member list">
    <tr class="header">
      <th>Ranking</th>
      <th>Name</th>
      <th>Email</th>
      <th>Points</th>
      <th>Dues Paid</th>
      <th>Position</th>
      <th>Actions</th>
    </tr>
    <% @join_google_users.each do |member| %>
        <% if @curr == 1 %>
          <td style="text-align: center">
            <%= @curr %> 
            <%= image_tag(member.avatar_url, alt: "Profile Picture", class: "rounded mx-auto d-block") %> 
            <br> <%= image_tag("gold_star.png", alt: "Gold Star", width: "20") %>
          </td>
        <% elsif @curr == 2 %>  
          <td style="text-align: center">
            <%= @curr %> 
            <%= image_tag(member.avatar_url, alt: "Profile Picture", class: "rounded mx-auto d-block") %>
            <br> <%= image_tag("silver_star.png", alt: "Silver Star", width: "20") %>
          </td>
        <% elsif @curr == 3 %> 
          <td style="text-align: center">
            <%= @curr %> 
            <%= image_tag(member.avatar_url, alt: "Profile Picture", class: "rounded mx-auto d-block") %>
            <br> <%= image_tag("bronze_star.png", alt: "Bronze Star", width: "20") %>
          </td>
        <% else %> 
          <td>
            <%= @curr %> 
            <%= image_tag(member.avatar_url, alt: "Profile Picture", class: "rounded mx-auto d-block") %>
          </td>
        <% end %>
        
        <td><%= member.name %></td>
        <td><%= member.email %></td>
        <td><%= member.points %></td>
        <td><%= member.dues_paid? ? 'Yes' : 'No' %></td>
        <td><%= member.position || '-' %></td>
        <td class="actions">
          <%= link_to("Show", member_path(member), class: 'btn btn-primary') %>
        </td>
      </tr>
      <% @curr += 1 %>
    <% end %>
  </table>

  <footer class="footer">
    <p>Contact Us</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 10px;">
      <%= link_to "https://www.instagram.com/heattamu", target: "_blank" do %>
        <%= image_tag("instagram_logo.png", alt: "Instagram", width: "30", height: "30", class: "footer-icon") %>
      <% end %>
      
      <%= link_to "mailto:heattamu@gmail.com" do %>
        <%= image_tag("email_logo.png", alt: "Email", width: "30", height: "30", class: "footer-icon") %>
      <% end %>
      
      <%= link_to "https://www.tiktok.com/@heattamu", target: "_blank" do %>
        <%= image_tag("tiktok_logo.png", alt: "TikTok", width: "30", height: "30", class: "footer-icon") %>
      <% end %>
    </div>
    <p style="margin-top: 15px;">&copy; <%= Time.now.year %> Texas A&M H.E.A.T. All Rights Reserved.</p>
  </footer>
</body>
