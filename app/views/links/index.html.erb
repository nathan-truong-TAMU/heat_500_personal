<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H.E.A.T.</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
</head>
  
<!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
       <%= link_to root_path, class: "navbar-brand" do %>
      <%= image_tag("HeatAppLogo.png", alt: "Logo",  width: "80", height: "80", class: "d-inline-block align-top") %>
    <% end %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <%= link_to "Members", members_path, class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "Events", events_path, class: "nav-link" %>
          </li>
          <% if is_officer_or_admin?(session) %>
            <li class="nav-item">
              <%= link_to "Event Attendance", events_members_path, class: "nav-link" %>
            </li>
          <% end %>
          <li class="nav-item">
            <%= link_to "Leaderboard", "/leaderboard", class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "Calendar", "/calendars", class: "nav-link" %>
          </li>

        </ul>
      </div>
      <div class="ml-auto">
        <% if current_user %>
        <div style="width: 75px; height: 75px; border-radius: 50%; overflow: hidden;">
          <%= link_to(check_member_attendance_path, onclick: "showEventsAndMeetings()") do %>
  <%= image_tag(current_user.avatar_url, style: "width: 100%; height: auto; border-radius: 50%; margin-bottom: 5px;") %>
<% end %>

        </div>
        <%= button_to "Logout", destroy_user_session_path(redirect_to: root_path), data: { turbo: "false" }, method: :delete, class: "btn btn-success" %>
        <% else %>
        <%= link_to "Login", new_user_session_path, class: "btn btn-success" %>
        <% end %>
        <!-- Add the new button for reading the content -->
      </div>
    </div>
  </nav>
<body>
<section id="about-organization" >
<h2>Links</h2>

<div id="links">
  <% @links.each do |link| %>
    <div class="link-item">
      <%= render link %>

      <!-- Shows editing link if the user is Officer/Admin and in Officer/Admin view mode -->
      <% if is_officer_or_admin?(session) && is_officer_or_admin_view?(session) %>
        <p>
          <%= link_to "Edit", link , class: "edit-circle"%>
        </p>
      <% end %>
    </div>

  <% end %>
</div>

<!-- Show 'Login to manage links' only if the user is not authenticated and in guest view mode -->
<% if is_guest_or_guest_view?(session) %>
      <%= link_to 'Login to manage links', login_manual_path, class: "auth-link" %>
<% end %>

<!-- Show 'New link' button only if authenticated or in 'admin' view mode -->
<% if is_officer_or_admin?(session) && is_officer_or_admin_view?(session) %>
  <%= link_to "New link", new_link_path, class: "admin-link" %>
<% end %>

<!-- Shows view toggle if the user is Admin/Officer -->
<% if is_officer_or_admin?(session) %>
  <p>
    <%= link_to 'Toggle View Mode', toggle_view_mode_path, class: "admin-link" %>
  </p>
<% end %>
</section>
</body>
 <footer class = "footer">
  <p>Contact Us</p>
  <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 10px;">
    <%= link_to "https://www.instagram.com/heattamu", target: "_blank" do %>
      <%= image_tag("instagram_logo.png", alt: "Instagram", width: "30", height: "30", class: "footer-icon") %>
    <% end %>
    
    <%= link_to "mailto:heattamu@gmail.com" do %>
      <%= image_tag("email_logo.png", alt: "Email", width: "30", height: "30", class: "footer-icon") %>
    <% end %>
    
    <%= link_to "https://www.tiktok.com/@heattamu", target: "_blank" do %>
      <%= image_tag("tiktok_logo.png", alt: "TikTok", width: "30", height: "30", class: "footer-icon") %>
    <% end %>
  </div>
  <p style="margin-top: 15px;">&copy; <%= Time.now.year %> Texas A&M H.E.A.T. All Rights Reserved.</p>
</footer>


</html>
